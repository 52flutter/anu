<!DOCTYPE html>
<html>

<head>
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width">
<!--
  <script src="https://cdn.bootcss.com/react/16.9.0/umd/react.development.js"></script>
  <script src="https://cdn.bootcss.com/react-dom/16.9.0/umd/react-dom.development.js"  ></script>
-->
<!--<script src="./dist/React.js"></script> -->
<script src="https://cdn.bootcss.com/react/16.9.0/umd/react.production.min.js"></script>
  <script src="https://cdn.bootcss.com/react-dom/16.8.6/umd/react-dom.production.min.js"></script>
 <script type='text/javascript' src="./lib/babel.js"></script>

</head>

<body>
 <div id='root' class="root">

 </div>
 <script type="text/babel">
const React = window.React;
//const ReactDOM = window.React;
const {
    useState, useEffect
} = React
function Counter() {
  const [count, setCount] = useState(0);
  const [step, setStep] = useState(1);

  useEffect(() => {
    const id = setTimeout(() => {
      setCount(c => c + step);
   }, 1000);
    return function(){
      console.log("执行清理")
       clearTimeout(id);
    }
  },[step]);

  return (
    <>
      <h1>{count}</h1>
      <input value={step} onChange={e => setStep(Number(e.target.value))} />
    </>
  );
}

window.onload = function(){
    ReactDOM.render(<Counter />, document.getElementById('root'));

}

 </script>
</body>

</html>


